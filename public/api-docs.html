<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HelloXiaohong API Documentation</title>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown-dark.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            padding: 2rem;
            margin: 0;
        }

        .markdown-body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }

        @media (max-width: 767px) {
            .markdown-body {
                padding: 15px;
            }
        }
    </style>
</head>

<body>
    <div id="content" class="markdown-body"></div>

    <!-- Embedded API.md content -->
    <script type="text/template" id="markdown-content">
# HelloXiaohong API Documentation

The system exposes a RESTful API for managing accounts, content, schedules, and logs.

Base URL: `http://localhost:3000/api`

---

## üë• Accounts (Ë¥¶Âè∑ÁÆ°ÁêÜ)

### Get All Accounts
Retrieves a list of all accounts.
- **GET** `/accounts`
- **Response**: `200 OK`
  ```json
  {
    "success": true,
    "data": [
      {
        "id": 1,
        "nickname": "My Account",
        "status": "active",
        "isLoggedIn": true
        ...
      }
    ]
  }
  ```

### Get Account
Retrieves details for a specific account.
- **GET** `/accounts/:id`

### Login (Add Account)
Initiates a QR code login process.
- **POST** `/accounts/login`
- **Response**: `200 OK` (Async process, check WebSocket for QR code)
  ```json
  {
    "success": true,
    "data": { "accountId": 12, "message": "..." }
  }
  ```

### Refresh Status
Checks if the account cookie is still valid.
- **POST** `/accounts/:id/refresh`

### Delete Account
- **DELETE** `/accounts/:id`

---

## üìù Contents (ÂÜÖÂÆπÁÆ°ÁêÜ)

### Get All Contents
- **GET** `/contents`
- **Query Params**:
  - `status` (optional): Filter by status (`draft`, `scheduled`, `published`, `failed`)

### Get Content
- **GET** `/contents/:id`

### Create Content
- **POST** `/contents`
- **Body**:
  ```json
  {
    "title": "My Post Title",
    "body": "Post description...",
    "type": "image" | "video",
    "mediaPaths": ["path/to/img1.jpg"],
    "tags": ["tag1", "tag2"],
    "location": "Optional Location"
  }
  ```

### Update Content
- **PUT** `/contents/:id`
- **Body**: Same as Create.

### Delete Content
- **DELETE** `/contents/:id`

### Upload Media
- **POST** `/contents/upload`
- **Body**: `multipart/form-data` with key `files`

---

## üìÖ Schedules (ÂèëÂ∏ÉËÆ°Âàí)

### Get All Schedules
- **GET** `/schedules`
- **Query Params**: `status` (optional)

### Get Schedule
- **GET** `/schedules/:id`

### Create Schedule
- **POST** `/schedules`
- **Body**:
  ```json
  {
    "contentId": 1,
    "accountId": 1,
    "scheduledAt": "2026-06-01T12:00:00"
  }
  ```

### Run Schedule Immediately
Forces a pending (or failed) schedule to run now.
- **POST** `/schedules/:id/run`

### Retry Schedule
Resets a failed or cancelled schedule to 'pending' and executes it immediately.
- **POST** `/schedules/:id/retry`

### Cancel Schedule
- **DELETE** `/schedules/:id`

---

## üìä Logs & Stats (Êó•Âøó‰∏éÁªüËÆ°)

### Get Logs
- **GET** `/logs`
- **Query Params**: `limit` (default 100)

### Get Schedule Logs
- **GET** `/logs/schedule/:id`

### Get Dashboard Stats
- **GET** `/logs/stats`
- **Response**: Returns counts for accounts, contents, schedules, and daily publish stats.

### Cleanup
Deletes all logs and historical schedule data.
- **DELETE** `/logs/cleanup`
  </script>

    <script>
        const markdown = document.getElementById('markdown-content').textContent;
        document.getElementById('content').innerHTML = marked.parse(markdown);
    </script>
</body>

</html>