# HelloXiaohong - å°çº¢ä¹¦è‡ªåŠ¨åŒ–å‘å¸ƒåŠ©æ‰‹

HelloXiaohong æ˜¯ä¸€ä¸ªåŸºäº Node.js å’Œ Playwright çš„å°çº¢ä¹¦ (Xiaohongshu) è‡ªåŠ¨åŒ–å‘å¸ƒç³»ç»Ÿã€‚å®ƒæä¾›äº†ä¸€å¥— RESTful API å’Œè‡ªåŠ¨åŒ–è„šæœ¬ï¼Œå¸®åŠ©ç”¨æˆ·ç®¡ç†å†…å®¹ã€é€šè¿‡è°ƒåº¦å™¨å®šæ—¶å‘å¸ƒå›¾æ–‡ç¬”è®°ï¼Œå¹¶æ”¯æŒå¤šæ€å‘å¸ƒæµç¨‹ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **è‡ªåŠ¨åŒ–å‘å¸ƒ**ï¼šä½¿ç”¨ Playwright æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼Œè‡ªåŠ¨å®Œæˆå›¾ç‰‡ä¸Šä¼ ã€æ ‡é¢˜å¡«å†™ã€æ­£æ–‡è¾“å…¥ã€æ ‡ç­¾é€‰æ‹©å’Œå‘å¸ƒã€‚
- **ä»»åŠ¡è°ƒåº¦**ï¼šå†…ç½®è°ƒåº¦å™¨ï¼Œæ”¯æŒç«‹å³å‘å¸ƒå’Œå®šæ—¶å‘å¸ƒã€‚
- **è´¦å·ç®¡ç†**ï¼šæ”¯æŒå¤šè´¦å·ç®¡ç†ï¼ˆç›®å‰ä¸»è¦æ”¯æŒå•æ´»è·ƒè´¦å·ï¼‰ã€‚
- **å†…å®¹ç®¡ç†**ï¼šé€šè¿‡ API åˆ›å»ºå’Œç®¡ç†å›¾æ–‡å†…å®¹ã€‚
- **æœ¬åœ°æœåŠ¡**ï¼šæä¾› Express æœåŠ¡å™¨å’Œ WebSocket æ”¯æŒï¼Œæ–¹ä¾¿ç›‘æ§å’Œäº¤äº’ã€‚
- **å®¹é”™æœºåˆ¶**ï¼šåŒ…å«é‡è¯•é€»è¾‘ã€å¼¹çª—å¤„ç†å’Œç®€å•çš„é”™è¯¯æ¢å¤ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Runtime**: Node.js (>=18.0.0)
- **Browser Automation**: Playwright (with `playwright-extra` & `puppeteer-extra-plugin-stealth`)
- **Server**: Express.js
- **Database**: SQLite (via `sql.js` / File-based)
- **Scheduler**: node-cron

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ çš„ç³»ç»Ÿå®‰è£…äº† Node.js 18+ã€‚

```bash
git clone https://github.com/corlin/helloxiaohong.git
cd helloxiaohong
npm install
```

### 2. é…ç½®æ–‡ä»¶

é¡¹ç›®ä½¿ç”¨ `.env` æ–‡ä»¶è¿›è¡Œé…ç½®ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
cp .env.example .env
```

ä¸»è¦é…ç½®é¡¹åœ¨ `src/config.js` ä¸­å®šä¹‰ï¼ŒåŒ…æ‹¬ç«¯å£ã€ç›®å½•è·¯å¾„å’Œå‘å¸ƒé™åˆ¶ç­‰ã€‚

### 3. å¯åŠ¨æœåŠ¡

å¯åŠ¨ API æœåŠ¡å™¨å’Œè°ƒåº¦å™¨ï¼š

```bash
npm run dev
```

æœåŠ¡å¯åŠ¨åï¼ŒAPI é»˜è®¤è¿è¡Œåœ¨ `http://localhost:3000`ã€‚

### 4. å‘å¸ƒå†…å®¹ç¤ºä¾‹

é¡¹ç›®ä¸­åŒ…å«ç¤ºä¾‹è„šæœ¬ï¼Œæ¼”ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªå‘å¸ƒä»»åŠ¡ã€‚

**å‘å¸ƒç¤ºä¾‹è„šæœ¬ (`scripts/publish_maori.js`)**:

è¯¥è„šæœ¬æ¼”ç¤ºäº†å®Œæ•´çš„æµç¨‹ï¼š
1. ä¸‹è½½å›¾ç‰‡èµ„æºã€‚
2. API: åˆ›å»ºå†…å®¹ (Content)ã€‚
3. API: åˆ›å»ºå‘å¸ƒè®¡åˆ’ (Schedule)ã€‚
4. API: è§¦å‘ç«‹å³æ‰§è¡Œã€‚

è¿è¡Œç¤ºä¾‹ï¼š

```bash
# ç¡®ä¿æœåŠ¡å·²å¯åŠ¨ (npm run dev)
node scripts/publish_maori.js
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
helloxiaohong/
â”œâ”€â”€ scripts/            # è‡ªåŠ¨åŒ–è„šæœ¬å’Œå®ç”¨å·¥å…·
â”‚   â”œâ”€â”€ publish_maori.js # ç¤ºä¾‹ï¼šå‘å¸ƒæ–°è¥¿å…°æ¯›åˆ©å²©é›•
â”‚   â””â”€â”€ quick_publish_v2.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/            # REST API è·¯ç”±
â”‚   â”œâ”€â”€ automation/     # Playwright è‡ªåŠ¨åŒ–æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ database/       # æ•°æ®åº“åˆå§‹åŒ–å’Œæ“ä½œ
â”‚   â”œâ”€â”€ scheduler/      # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ server.js       # Express æœåŠ¡å™¨å…¥å£
â”‚   â””â”€â”€ config.js       # é¡¹ç›®é…ç½®
â”œâ”€â”€ data/               # SQLite æ•°æ®åº“æ–‡ä»¶ (è¿è¡Œæ—¶ç”Ÿæˆ)
â”œâ”€â”€ uploads/            # å›¾ç‰‡ä¸Šä¼ ç›®å½•
â”œâ”€â”€ logs/               # è¿è¡Œæ—¥å¿—å’Œæˆªå›¾
â””â”€â”€ public/             # é™æ€èµ„æº (å‰ç«¯ Dashboard)
```

## ğŸ“ API æ¦‚è§ˆ

- `GET /api/accounts`: è·å–è´¦å·åˆ—è¡¨
- `POST /api/contents`: åˆ›å»ºæ–°å†…å®¹
- `POST /api/schedules`: åˆ›å»ºå‘å¸ƒè®¡åˆ’
- `POST /api/schedules/run-now`: ç«‹å³è§¦å‘è°ƒåº¦å™¨æ£€æŸ¥

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

ISC
